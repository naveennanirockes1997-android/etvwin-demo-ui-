import{c as i,R as V,r as s,j as e,u as q,b as B}from"./index-DEpxVuBu.js";import{P as F,a as j}from"./api-CnTjIxnj.js";import{A as I}from"./arrow-left-BT8Y0GMb.js";const D=[["rect",{width:"18",height:"14",x:"3",y:"5",rx:"2",ry:"2",key:"12ruh7"}],["path",{d:"M7 15h4M15 15h2M7 11h2M13 11h4",key:"1ueiar"}]],H=i("captions",D);const U=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],W=i("maximize",U);const X=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],G=i("pause",X);const J=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],K=i("rotate-ccw",J);const O=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],Q=i("volume-2",O);const Y=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],Z=i("volume-x",Y),ee=({src:l,title:u,thumbnail:r})=>{const n=s.useRef(null),m=s.useRef(null),[c,h]=s.useState(!1),[d,x]=s.useState(!1),[k,w]=s.useState(0),[N,M]=s.useState(0),[C,_]=s.useState(0),[z,p]=s.useState(!0),[P,y]=s.useState(!1),[L,S]=s.useState(1),f=s.useRef(null),g=s.useCallback(()=>{n.current.paused?(n.current.play(),h(!0)):(n.current.pause(),h(!1))},[]),E=()=>{n.current.muted=!n.current.muted,x(n.current.muted)},R=()=>{const t=n.current.currentTime,a=n.current.duration;w(t/a*100),_(t)},T=t=>{const a=t.currentTarget.getBoundingClientRect(),o=(t.clientX-a.left)/a.width;n.current.currentTime=o*n.current.duration},$=()=>{document.fullscreenElement?document.exitFullscreen():m.current.requestFullscreen()},A=()=>{p(!0),f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{c&&p(!1)},3e3)},v=t=>{const a=Math.floor(t/60),o=Math.floor(t%60);return`${a}:${o.toString().padStart(2,"0")}`};return s.useEffect(()=>{const t=n.current;if(!t)return;const a=()=>y(!0),o=()=>y(!1),b=()=>M(t.duration);return t.addEventListener("waiting",a),t.addEventListener("playing",o),t.addEventListener("loadedmetadata",b),()=>{t.removeEventListener("waiting",a),t.removeEventListener("playing",o),t.removeEventListener("loadedmetadata",b)}},[]),e.jsxs("div",{ref:m,className:"relative w-full h-full bg-black group overflow-hidden",onMouseMove:A,onClick:g,children:[e.jsx("video",{ref:n,src:l,poster:r,className:"w-full h-full object-contain cursor-pointer",onTimeUpdate:R,autoPlay:!0}),P&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20 pointer-events-none",children:e.jsx("div",{className:"w-20 h-20 border-4 border-primary border-t-transparent rounded-full animate-spin"})}),e.jsxs("div",{className:`absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-black/40 transition-opacity duration-500 flex flex-col justify-end p-6 md:p-10 ${z?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:t=>t.stopPropagation(),children:[e.jsx("div",{className:"absolute top-10 left-10 hidden md:block",children:e.jsx("h2",{className:"text-2xl font-bold text-white drop-shadow-lg",children:u})}),e.jsx("div",{className:"relative w-full h-1.5 bg-white/30 rounded-full mb-6 cursor-pointer group/seek",onClick:T,children:e.jsx("div",{className:"absolute top-0 left-0 h-full bg-primary rounded-full flex items-center justify-end",style:{width:`${k}%`},children:e.jsx("div",{className:"w-4 h-4 rounded-full bg-primary scale-0 group-hover/seek:scale-100 transition-transform shadow-[0_0_10px_rgba(229,9,20,0.8)]"})})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-6 md:gap-8",children:[e.jsx("button",{onClick:g,className:"text-white hover:text-primary transition-colors",children:c?e.jsx(G,{size:32,fill:"currentColor"}):e.jsx(F,{size:32,fill:"currentColor"})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:E,className:"text-white hover:text-primary transition-colors",children:d?e.jsx(Z,{size:28}):e.jsx(Q,{size:28})}),e.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:L,onChange:t=>{const a=parseFloat(t.target.value);S(a),n.current.volume=a},className:"w-20 hidden md:block accent-primary"})]}),e.jsxs("span",{className:"text-white font-medium text-sm md:text-base",children:[v(C)," / ",v(N)]})]}),e.jsxs("div",{className:"flex items-center gap-6 md:gap-8",children:[e.jsx("button",{className:"text-white hover:text-primary transition-colors hidden md:block",children:e.jsx(H,{size:24})}),e.jsx("button",{className:"text-white hover:text-primary transition-colors hidden md:block",children:e.jsx(K,{size:24})}),e.jsx("button",{onClick:$,className:"text-white hover:text-primary transition-colors",children:e.jsx(W,{size:28})})]})]})]})]})},te=V.memo(ee),re=()=>{const{id:l}=q(),u=B(),[r,n]=s.useState(null),[m,c]=s.useState(!0);return s.useEffect(()=>{(async()=>{c(!0);try{const d=await j.getContentDetails(l),x=await j.getPlaybackData(l);n({...d,...x})}catch(d){console.error("Failed to fetch content details:",d)}finally{c(!1)}})()},[l]),m?e.jsx("div",{className:"h-screen w-full flex items-center justify-center bg-black",children:e.jsx("div",{className:"w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin"})}):r?e.jsxs("div",{className:"fixed inset-0 bg-black z-[100] flex flex-col",children:[e.jsxs("button",{onClick:()=>u(-1),className:"absolute top-6 left-6 z-[110] text-white hover:text-primary transition-colors flex items-center gap-2 font-medium",children:[e.jsx(I,{size:32}),e.jsx("span",{className:"text-lg hidden md:inline",children:"Back to browsing"})]}),e.jsx(te,{src:r.playback_url||r.videoUrl,title:r.title,thumbnail:r.movie_banner||r.backdrop})]}):e.jsxs("div",{className:"h-screen w-full flex flex-col items-center justify-center bg-black",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Content not found"}),e.jsx("button",{onClick:()=>u(-1),className:"btn-primary",children:"Back"})]})};export{re as default};
