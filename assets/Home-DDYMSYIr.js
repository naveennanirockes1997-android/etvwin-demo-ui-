import{c as f,R as u,j as e,L as i,r}from"./index-BWMZyNZM.js";import{P as b,a as j}from"./api-BbWXOcdw.js";import{C as o}from"./ContentRow-C8-ZKKzB.js";import"./SkeletonCard-CQxyBi4o.js";const g=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],v=f("info",g),y=({item:t,isLoading:n})=>n||!t?e.jsx("div",{className:"relative h-[60vh] md:h-[85vh] w-full shimmer"}):e.jsxs("div",{className:"relative h-[60vh] md:h-[85vh] w-full overflow-hidden mb-8",children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("img",{src:t.movie_banner||t.backdrop||t.banner||t.cover_image||"/src/assets/images/banner.png",alt:t.title||t.name,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black via-black/40 to-transparent"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background via-transparent to-black/30"})]}),e.jsxs("div",{className:"absolute bottom-[10%] md:bottom-[20%] left-4 md:left-12 max-w-2xl",children:[e.jsx("h1",{className:"text-3xl md:text-6xl font-black mb-4 drop-shadow-lg uppercase tracking-tight",children:t.title||t.name}),e.jsx("p",{className:"text-sm md:text-lg text-gray-200 mb-6 line-clamp-3 drop-shadow-md font-medium",children:t.description||t.summary||t.synopsis}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(i,{to:`/watch/${t.id}`,className:"btn-primary py-3 px-8 text-lg font-bold",children:[e.jsx(b,{fill:"currentColor",size:24})," Play"]}),e.jsxs(i,{to:`/movie/${t.id}`,className:"btn-secondary py-3 px-8 text-lg font-bold",children:[e.jsx(v,{size:24})," More Info"]})]})]})]}),N=u.memo(y),C=()=>{const[t,n]=r.useState({trending:[],popular:[],latest:[],recommended:[],hero:null}),[a,d]=r.useState(!0),[m,x]=r.useState(null);return r.useEffect(()=>{(async()=>{d(!0),x(null);try{const s=await j.getHomeData();if(Array.isArray(s)&&s.length>0){const p=[...s].sort((l,c)=>parseInt(c.release_date)-parseInt(l.release_date)),h=[...s].sort((l,c)=>parseInt(c.rt_score)-parseInt(l.rt_score));n({hero:s[Math.floor(Math.random()*s.length)],trending:h.slice(0,10),popular:h.slice(10,20),latest:p.slice(0,10),recommended:s.slice(5,15)})}}catch(s){console.error("Failed to fetch Ghibli home data:",s),x("Failed to load content. Please check your connection.")}finally{d(!1)}})()},[]),m?e.jsxs("div",{className:"h-screen flex flex-col items-center justify-center p-6 text-center",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4 text-primary",children:"Connection Error"}),e.jsx("p",{className:"text-text-muted mb-8 max-w-md",children:m}),e.jsx("button",{onClick:()=>window.location.reload(),className:"btn-primary",children:"Try Again"})]}):e.jsxs("div",{className:"pb-20",children:[e.jsx(N,{item:t.hero,isLoading:a}),e.jsxs("div",{className:"-mt-16 md:-mt-32 relative z-10 space-y-8",children:[e.jsx(i,{to:"/trending",className:"block transition-transform hover:scale-[1.01] active:scale-100",children:e.jsx(o,{title:"Trending Now",items:t.trending,isLoading:a})}),e.jsx(o,{title:"Top Rated Classics",items:t.popular,isLoading:a}),e.jsx(o,{title:"Latest Releases",items:t.latest,isLoading:a}),e.jsx(o,{title:"Recommended for You",items:t.recommended,isLoading:a})]})]})};export{C as default};
